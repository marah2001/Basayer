

<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¹Ù‡Ø¯ Ø¨ØµØ§Ø¦Ø± Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    
    <style>
         :root { --primary-brown: #5D4037; --gold-accent: #C5A059; --bg-light: #FCFAf5; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg-light); scroll-behavior: smooth; overflow-x: hidden; }
        h1, h2, h3, .font-amiri { font-family: 'Amiri', serif; }
        
        /* Dark Mode */
        .dark-mode { background-color: #0F172A !important; color: #F1E4C3 !important; }
        .dark-mode nav { background-color: rgba(15, 23, 42, 0.95) !important; border-bottom: 1px solid rgba(197, 160, 89, 0.2) !important; }
        .dark-mode section { background-color: #0F172A !important; }
        .dark-mode h1, .dark-mode h2, .dark-mode h3, .dark-mode p, .dark-mode span { color: #F1E4C3 !important; }
        .dark-mode .course-card { background: rgba(30, 41, 59, 0.6) !important; border: 1px solid rgba(197, 160, 89, 0.2) !important; }
        
        .islamic-pattern { background-image: url('https://www.transparenttextures.com/patterns/islamic-art.png'); opacity: 0.05; position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 0; }
        .btn-gold { background-color: var(--gold-accent); color: white; transition: 0.3s; animation: pulse-gold 2s infinite; }
        @keyframes pulse-gold { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(197, 160, 89, 0.4); } 70% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(197, 160, 89, 0); } 100% { transform: scale(1); } }
        
        .course-card { transition: all 0.4s ease; cursor: pointer; border-right: 4px solid transparent; background: white; }
        .course-card:hover { transform: translateY(-10px); border-right-color: var(--gold-accent); }
        .nav-active { border-bottom: 2px solid var(--gold-accent) !important; color: var(--gold-accent) !important; }
        .success-msg { color: #2e7d32; background: #e8f5e9; padding: 15px; border-radius: 12px; border: 1px solid #c8e6c9; }
        .error-msg { color: #c62828; background: #ffebee; padding: 15px; border-radius: 12px; border: 1px solid #ffcdd2; }
    </style>
</head>

<body>

    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-100 shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-4 space-x-reverse">
                <div class="text-3xl font-bold text-[#5D4037] font-amiri tracking-wider">Ù…Ø¹Ù‡Ø¯ Ø¨ÙØµØ§Ø¦Ø±</div>
                <div class="h-8 w-[1px] bg-gray-300 mx-2 hidden md:block"></div>
                <p class="text-[10px] text-gray-500 hidden md:block leading-tight uppercase font-bold">Ù‡Ø¯ÙŠØ© Ø§Ù„Ø¹Ù„Ù…<br>Ø¨ØµÙŠØ±Ø© Ù„Ù„Ø¹Ù…Ù„</p>
            </div>

            <button onclick="toggleMobileMenu()" class="lg:hidden text-[#5D4037] text-2xl">â˜°</button>

            <ul id="navMenu" class="hidden lg:flex space-x-8 space-x-reverse text-[#5D4037] font-medium">
                <li><a href="#hero" class="nav-link">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="#about" class="nav-link">Ø¹Ù† Ø§Ù„Ù…Ø¹Ù‡Ø¯</a></li>
                <li><a href="#guide" class="nav-link">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ</a></li>
                <li><a href="#path" class="nav-link">Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø¹Ù„Ù…ÙŠ</a></li>
                <li id="scheduleNavItem" class="hidden"><a href="javascript:void(0)" onclick="openScheduleModal()" class="text-[#C5A059]">Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ</a></li>
                <li><a href="#community" class="nav-link">Ø§Ù„Ù…Ø¬ØªÙ…Ø¹</a></li>
            </ul>

            <div class="hidden lg:flex items-center gap-4">
                <div id="authArea">
                    <button id="loginBtnNav" onclick="openLogin()" class="btn-gold px-6 py-2 rounded-md font-bold text-sm">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†</button>
                    <div id="userWelcome" class="hidden text-[#5D4037] font-bold flex items-center gap-2">
                        <span id="welcomeMsg">Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ <span id="studentFirstName" class="text-[#C5A059]"></span></span>
                        <button onclick="logout()" class="text-xs text-red-500 underline mr-2">Ø®Ø±ÙˆØ¬</button>
                    </div>
                </div>
                <button onclick="toggleDarkMode()" id="darkModeBtn" class="p-2 text-xl">ğŸŒ™</button>
            </div>
        </div>
    </nav>

    <section id="hero" class="relative bg-[#F5F5DC] py-28 overflow-hidden border-b-4 border-[#C5A059]">
        <div class="islamic-pattern"></div>
        <div class="container mx-auto px-6 relative z-10 text-center">
            <h1 class="text-5xl md:text-7xl font-bold text-[#4E342E] mb-6">Ù…Ø¹Ù‡Ø¯ Ø¨ØµØ§Ø¦Ø± Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</h1>
            <p class="text-xl text-[#6D4C41] max-w-2xl mx-auto mb-10 italic">Ø±Ø­Ù„Ø© Ø¥ÙŠÙ…Ø§Ù†ÙŠØ© ØªØ¬Ù…Ø¹ Ø¨ÙŠÙ† ØªØ£ØµÙŠÙ„ Ø§Ù„ØªØ±Ø§Ø« ÙˆØ£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹ØµØ±.</p>
            <div class="flex justify-center gap-4">
                <button id="heroLoginBtn" onclick="openLogin()" class="btn-gold px-10 py-4 rounded-lg text-lg font-bold">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‚Ø¨ÙˆÙ„</button>
            </div>
        </div>
    </section>

    <section id="guide" class="py-16 px-6 bg-[#FCFAf5] relative">
        <div class="container mx-auto max-w-5xl">
            <h2 class="text-4xl font-bold text-center text-[#5D4037] mb-12">Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="course-card p-8 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold text-[#5D4037] mb-4">ğŸ“œ Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø¨Ø§Ù„Ø¯Ø¨Ù„ÙˆÙ…</h3>
                    <p class="text-gray-600">ØªØ£ØµÙŠÙ„ Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ© Ø¨Ù…Ù†Ù‡Ø¬ÙŠØ© Ø¹Ù„Ù…ÙŠØ© Ø±ØµÙŠÙ†Ø© ÙˆØ¨Ù†Ø§Ø¡ Ø§Ù„Ø­ØµØ§Ù†Ø© Ø§Ù„ÙÙƒØ±ÙŠØ©.</p>
                </div>
                <div class="course-card p-8 rounded-xl shadow-md">
                    <h3 class="text-2xl font-bold text-[#5D4037] mb-4">ğŸŒ Ø¢Ù„ÙŠØ© Ø§Ù„ØªØ¯Ø±ÙŠØ³</h3>
                    <p class="text-gray-600">Ø¹Ù† Ø¨ÙØ¹Ø¯ Ø¹Ø¨Ø± Ù…Ø¬ØªÙ…Ø¹Ø§Øª Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙ…Ù†ØµØ© Moodle Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="about" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2">
                    <h2 class="text-4xl font-bold text-[#5D4037] font-amiri mb-6">Ø±Ø¤ÙŠØ© Ø§Ù„Ù…Ø¹Ù‡Ø¯ ÙˆØ£Ù‡Ø¯Ø§ÙÙ‡</h2>
                    <p class="text-gray-600 leading-relaxed mb-6 text-lg">ÙŠØ³Ø¹Ù‰ Ù…Ø¹Ù‡Ø¯ Ø¨ØµØ§Ø¦Ø± Ø¥Ù„Ù‰ Ø³Ø¯ Ø§Ù„Ø«ØºØ±Ø© ÙÙŠ Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø´Ø±Ø¹ÙŠ Ø§Ù„Ù…Ø¹Ø§ØµØ±.</p>
                </div>
                <div class="md:w-1/2 bg-[#F5F5DC] p-10 rounded-3xl relative">
                    <div class="text-[#5D4037] italic text-xl leading-loose font-amiri text-center">
                        "Ù…ÙÙ†Ù’ ÙŠÙØ±ÙØ¯Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø¨ÙÙ‡Ù Ø®ÙÙŠÙ’Ø±Ù‹Ø§ ÙŠÙÙÙÙ‚ÙÙ‘Ù‡Ù’Ù‡Ù ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘ÙŠÙ†Ù"
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="path" class="py-20 bg-[#FCFAf5] relative">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold text-[#5D4037] font-amiri mb-10">Ø®Ø±ÙŠØ·Ø©Ù Ø¨ØµØ§Ø¦Ø± Ø§Ù„Ø¹ÙÙ„Ù…ÙŠØ©</h2>
            <div class="inline-flex bg-gray-100 p-2 rounded-full mb-12">
                <button onclick="showSemester(1)" id="btn-sem1" class="px-10 py-3 rounded-full font-bold transition-all">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</button>
                <button onclick="showSemester(2)" id="btn-sem2" class="px-10 py-3 rounded-full font-bold transition-all">Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ</button>
            </div>
            <div id="semester1-content" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
            <div id="semester2-content" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 hidden"></div>
        </div>
    </section>

    <section id="scheduleSection" class="py-16 bg-white hidden border-t-4 border-[#C5A059]">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold text-[#5D4037] font-amiri mb-8">Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ù…Ø¹ØªÙ…Ø¯</h2>
            <div class="max-w-4xl mx-auto shadow-2xl rounded-2xl overflow-hidden border-4 border-[#F5F5DC]">
                <img src="scedule.jpg" alt="Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ" class="w-full h-auto block">
            </div>
        </div>
    </section>

    <section id="community" class="py-20 bg-[#5D4037] text-white relative border-t-8 border-[#C5A059]">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-bold mb-10 text-[#C5A059]">Ù…Ø¬ØªÙ…Ø¹ Ø¨ØµØ§Ø¦Ø± Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div id="card-library" class="bg-white/5 p-8 rounded-2xl border border-white/10 opacity-50">
                    <div class="text-4xl mb-4">ğŸ“š</div>
                    <h3 class="font-bold text-xl text-[#C5A059]">Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h3>
                    <p id="lib-status" class="text-xs text-gray-400 mt-2">(ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨)</p>
                </div>
                <div id="card-chat" class="bg-white/5 p-8 rounded-2xl border border-white/10 opacity-50">
                    <div class="text-4xl mb-4">ğŸ’¬</div>
                    <h3 class="font-bold text-xl text-[#C5A059]">Ø­Ù„Ù‚Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø´</h3>
                    <p id="chat-status" class="text-xs text-gray-400 mt-2">(Ù…ØªØ§Ø­ Ù„Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†)</p>
                </div>
                <div id="card-certs" class="bg-white/5 p-8 rounded-2xl border border-white/10 opacity-50">
                    <div class="text-4xl mb-4">ğŸ†</div>
                    <h3 class="font-bold text-xl text-[#C5A059]">Ù„ÙˆØ­Ø§Øª Ø§Ù„Ø´Ø±Ù</h3>
                    <p id="cert-status" class="text-xs text-gray-400 mt-2">(Ù…ØªØ§Ø­ Ù„Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†)</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-white py-12 border-t border-gray-100">
        <div class="container mx-auto px-6 text-center">
            <div class="text-2xl font-bold text-[#5D4037] font-amiri mb-4">Ù…Ø¹Ù‡Ø¯ Ø¨ÙØµØ§Ø¦Ø± Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ©</div>
            <p class="text-gray-400 text-sm">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; 2024 - Ù…Ø¹Ù‡Ø¯ Ø¨ØµØ§Ø¦Ø±</p>
        </div>
    </footer>

    <div id="loginModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[200] hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-md rounded-3xl shadow-2xl border-2 border-[#C5A059] overflow-hidden">
            <div class="bg-[#5D4037] p-6 text-white text-center relative">
                <h3 class="text-2xl font-amiri">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ØªØ­Ù‚Ù‚ Ù„Ù„Ù…Ù‚Ø¨ÙˆÙ„ÙŠÙ†</h3>
                <button onclick="closeLogin()" class="absolute top-4 left-4 text-white/50 hover:text-white">&times;</button>
            </div>
            <div class="p-8">
                <p id="loginDesc" class="text-sm text-gray-500 mb-4 text-center italic">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
                
                <input type="text" id="idInput" oninput="detectInputType()" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© / Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„" class="w-full p-3 rounded-xl border-2 border-[#F5F5DC] focus:border-[#C5A059] outline-none text-center mb-3 text-lg font-bold">
                
                <input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="w-full p-3 rounded-xl border-2 border-[#F5F5DC] focus:border-[#C5A059] outline-none text-center mb-4 text-lg font-bold">
                
                <div id="genderSelection" class="hidden justify-center gap-8 mb-6 bg-gray-50 p-3 rounded-xl border border-gray-100">
                    <p class="text-[#5D4037] text-sm font-bold w-full text-center mb-2">ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¬Ù†Ø³:</p>
                    <label class="flex items-center gap-2 cursor-pointer group">
                        <input type="radio" name="gender" value="Ø°ÙƒØ±" class="accent-[#C5A059] w-4 h-4">
                        <span class="text-[#5D4037] font-bold group-hover:text-[#C5A059]">Ø°ÙƒØ±</span>
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer group">
                        <input type="radio" name="gender" value="Ø£Ù†Ø«Ù‰" class="accent-[#C5A059] w-4 h-4">
                        <span class="text-[#5D4037] font-bold group-hover:text-[#C5A059]">Ø£Ù†Ø«Ù‰</span>
                    </label>
                </div>

                <button onclick="checkStudent()" id="checkBtn" class="w-full bg-[#C5A059] text-white font-bold py-4 rounded-xl shadow-lg transition hover:brightness-110">ØªØ­Ù‚Ù‚ Ø§Ù„Ø¢Ù†</button>
                <div id="loginMsg" class="mt-4 text-center"></div>
            </div>
        </div>
    </div>

    <div id="courseModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm z-[300] hidden items-center justify-center p-4">
        <div class="bg-white w-full max-w-lg rounded-3xl shadow-2xl border-b-8 border-[#C5A059] overflow-hidden">
            <div class="p-8 text-right">
                <div class="flex justify-between items-start mb-4 text-xs font-bold text-gray-400">
                    <span id="modalSem" class="bg-[#F5F5DC] text-[#C5A059] px-3 py-1 rounded-full"></span>
                    <button onclick="toggleModal('courseModal', 'close')" class="text-3xl">&times;</button>
                </div>
                <h3 id="modalTitle" class="text-3xl font-bold text-[#5D4037] font-amiri mb-2"></h3>
                <p id="modalTeacher" class="text-[#C5A059] font-bold mb-6 italic border-b pb-4 border-[#F5F5DC]"></p>
                <p id="modalDesc" class="text-gray-700 leading-relaxed mb-8 text-lg"></p>
                <button onclick="toggleModal('courseModal', 'close')" class="w-full bg-[#5D4037] text-white py-4 rounded-xl font-bold">Ø­Ø³Ù†Ø§Ù‹ØŒ ÙÙ‡Ù…Øª</button>
            </div>
        </div>
    </div>

    <div id="certModal" class="fixed inset-0 bg-black/95 z-[999] hidden items-center justify-center p-4 backdrop-blur-sm">
        <button onclick="closeModal('certModal')" class="absolute top-6 right-6 w-12 h-12 flex items-center justify-center bg-[#C5A059] text-white rounded-full text-3xl font-bold hover:scale-110 transition-transform animate-bounce z-[1001] shadow-lg">Ã—</button>
        <div class="relative w-full max-w-5xl flex items-center justify-center overflow-hidden group">
            <button onclick="moveCert(-1)" class="absolute left-4 z-[1000] bg-white/10 p-4 rounded-full text-white hover:bg-[#C5A059] transition-all text-2xl shadow-xl">â®</button>
            <div class="overflow-hidden w-[80%] md:w-[60%]">
                <div id="certSlider" class="flex transition-transform duration-500 ease-in-out"></div>
            </div>
            <button onclick="moveCert(1)" class="absolute right-4 z-[1000] bg-white/10 p-4 rounded-full text-white hover:bg-[#C5A059] transition-all text-2xl shadow-xl">â¯</button>
        </div>
    </div>

    <div id="fullCertView" class="fixed inset-0 bg-black/90 z-[2000] hidden items-center justify-center p-4">
        <button onclick="closeModal('fullCertView')" class="absolute top-8 right-8 text-white text-5xl font-light hover:text-[#C5A059] transition-colors">Ã—</button>
        <img id="fullCertImg" src="" class="max-w-full max-h-full rounded-lg shadow-2xl border-2 border-white/20">
    </div>

    <script>
        // 1. Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ´ÙÙŠØ± (Ù†ÙØ³Ù‡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø£Ø¯Ø§Ø©)
        const SECRET_KEY = "Basayer_Secure_Vault_Key_2024";

        const coursesData = {
            'Ø§Ù„Ø¹Ù‚ÙŠØ¯Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© (1)': { teacher: 'Ø¯. Ø¨ÙƒØ± Ø£Ø¨Ùˆ ØµÙˆØµÙŠÙ†', phone: '972599793244', desc: 'ØªØ£ØµÙŠÙ„ Ø§Ù„ØªÙˆØ­ÙŠØ¯ ÙˆØ£ØµÙˆÙ„ Ø§Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¹Ù„Ù‰ Ù…Ù†Ù‡Ø¬ Ø£Ù‡Ù„ Ø§Ù„Ø³Ù†Ø© ÙˆØ§Ù„Ø¬Ù…Ø§Ø¹Ø©.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†': { teacher: 'Ø¯. Ø¹Ø§Ù…Ø± Ù‚Ø§Ø³Ù…', phone: '', desc: 'Ø¯Ø±Ø§Ø³Ø© Ù†Ø´Ø£Ø© Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†ØŒ ØªØ¯ÙˆÙŠÙ†Ù‡ØŒ Ø¥Ø¹Ø¬Ø§Ø²Ù‡.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©': { teacher: 'Ø¯. Ø¹Ù…Ø± Ø§Ù„Ù‡Ù…Øµ', phone: '972594080047', desc: 'Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ù†Ø­Ùˆ Ø§Ù„Ø¹Ø±Ø¨ÙŠ ÙˆØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù…Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ….', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø£ØµÙˆÙ„ Ø§Ù„ÙÙ‚Ù‡': { teacher: 'Ø¯. Ø­Ø³Ø§Ù… Ø§Ù„Ø¬Ø²Ø§Ø±', phone: '970567331795', desc: 'Ø¯Ø±Ø§Ø³Ø© Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªÙ†Ø¨Ø§Ø· ÙˆØ§Ù„Ø£Ø¯Ù„Ø© Ø§Ù„Ù…ØªÙÙ‚ Ø¹Ù„ÙŠÙ‡Ø§ ÙˆØ§Ù„Ù…Ø®ØªÙ„Ù ÙÙŠÙ‡Ø§.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø§Ù„ÙÙ‚Ù‡ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ': { teacher: 'Ø¯. ØµÙ‡ÙŠØ¨ Ø§Ù„Ø±ÙˆÙ…ÙŠ', phone: '972592160004', desc: 'ÙÙ‚Ù‡ Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª (Ø§Ù„ØµÙ„Ø§Ø©ØŒ Ø§Ù„ØµÙŠØ§Ù…ØŒ Ø§Ù„Ø²ÙƒØ§Ø©ØŒ ÙˆØ§Ù„Ø­Ø¬).', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©': { teacher: 'Ø¯. Ù†Ø§ØµØ± Ø§Ù„Ù…ØµØ±ÙŠ', phone: '972599855043', desc: 'Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© ÙÙŠ Ø¸Ù„ Ø§Ù„Ø¹ÙˆÙ„Ù…Ø©.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ù†Ø¨ÙˆÙŠØ©': { teacher: 'Ø¯. Ø¨Ù„Ø§Ù„ Ø¹Ø§Ø¨Ø¯ÙŠÙ†', phone: '970595058020', desc: 'Ù‚Ø±Ø§Ø¡Ø© ÙÙŠ Ø³ÙŠØ±Ø© Ø§Ù„Ù†Ø¨ÙŠ ï·º Ù…Ø¹ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¯Ø±ÙˆØ³.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø£ÙˆÙ„' },
            'ÙÙ‚Ù‡ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª': { teacher: 'Ø¯. ØµÙ‡ÙŠØ¨ Ø§Ù„Ø±ÙˆÙ…ÙŠ', phone: '972592160004', desc: 'Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø¨ÙŠÙˆØ¹ ÙˆØ§Ù„Ø¹Ù‚ÙˆØ¯ Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' },
            'Ø§Ù„Ø¹Ù‚ÙŠØ¯Ø© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© (2)': { teacher: 'Ø¯. Ø¨ÙƒØ± Ø£Ø¨Ùˆ ØµÙˆØµÙŠÙ†', phone: '972599793244', desc: 'Ø¯Ø±Ø§Ø³Ø© Ø§Ù„ÙØ±Ù‚ ÙˆØ§Ù„Ù…Ø°Ø§Ù‡Ø¨ØŒ ÙˆÙ…Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¶Ø§Ø¡ ÙˆØ§Ù„Ù‚Ø¯Ø±.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' },
            'Ø¹Ù„Ù… Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø­Ø¯ÙŠØ«': { teacher: 'Ø¯. Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¹Ø·ÙŠ Ø§Ù„Ø£Ø®Ø±Ø³', phone: '972598899271', desc: 'Ù‚ÙˆØ§Ø¹Ø¯ ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø­Ø¯ÙŠØ« Ù…Ù† Ø­ÙŠØ« Ø§Ù„Ù‚Ø¨ÙˆÙ„ ÙˆØ§Ù„Ø±Ø¯.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' },
            'ÙÙ‚Ù‡ Ø§Ù„Ø£Ø³Ø±Ø©': { teacher: 'Ø¯. Ø£Ø³Ø§Ù…Ø© Ø§Ù„Ø¬Ø²Ø§Ø±', phone: '970599478538', desc: 'Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù†ÙƒØ§Ø­ØŒ Ø§Ù„Ø·Ù„Ø§Ù‚ØŒ Ø§Ù„Ù…ÙˆØ§Ø±ÙŠØ«.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' },
            'Ù‚Ø¶Ø§ÙŠØ§ Ù…Ø¹Ø§ØµØ±Ø©': { teacher: 'Ø¯. Ø¹Ù…Ø§Ø¯ Ø§Ù„Ø¯Ø§ÙŠØ©', phone: '970592722232', desc: 'ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø°Ø§Ù‡Ø¨ Ø§Ù„ÙÙƒØ±ÙŠØ© Ø§Ù„Ù…Ù†Ø­Ø±ÙØ©.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' },
            'ÙÙ‚Ù‡ Ø§Ù„Ø¯Ø¹ÙˆØ©': { teacher: 'Ø¯. Ø¹Ù…Ø± Ø§Ù„Ù‡Ù…Øµ', phone: '972594080047', desc: 'Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ø¯Ø¹ÙˆØ© Ø¥Ù„Ù‰ Ø§Ù„Ù„Ù‡ ÙˆÙÙ‚Ù‡ Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø§Øª.', sem: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø«Ø§Ù†ÙŠ' }
        };

        // ğŸŸ¢ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø´Ø¨Ø§Ø¨ / Ø¨Ù†Ø§Øª)
        const WHATSAPP_LINKS = {
            'Ø°ÙƒØ±': 'https://chat.whatsapp.com/MALE_LINK_HERE',
            'Ø£Ù†Ø«Ù‰': 'https://chat.whatsapp.com/FEMALE_LINK_HERE'
        };

        const certificateImages = ['cert1.jpg', 'cert2.jpg', 'cert3.jpg'];
        let currentIdx = 0;
        let studentsCache = null;
        let isPhoneMode = false;
        let isLoggedIn = false;

        window.onload = () => {
            initCourses();
            checkSession();
            if (localStorage.getItem('theme') === 'dark') toggleDarkMode();
        };

        function checkSession() {
            const savedUser = localStorage.getItem('basayer_user');
            if (savedUser) {
                const user = JSON.parse(savedUser);
                isLoggedIn = true;
                updateUIOnLogin(user.firstName, user.gender);
            }
        }

        // --- ÙƒØ´Ù Ù†ÙˆØ¹ Ø§Ù„Ù…Ø¯Ø®Ù„ (Ø¬ÙˆØ§Ù„ Ø£Ù… Ù‡ÙˆÙŠØ©) ---
        function detectInputType() {
            const val = document.getElementById('idInput').value.trim();
            const passInput = document.getElementById('passwordInput');
            const checkBtn = document.getElementById('checkBtn');
            const genderDiv = document.getElementById('genderSelection');
            const desc = document.getElementById('loginDesc');

            const isPhone = /^(059|056)\d{7}$/.test(val);

            if (isPhone) {
                isPhoneMode = true;
                passInput.type = "text";
                passInput.placeholder = "Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ù„Ø­ÙØ¸Ù‡";
                passInput.classList.add('bg-green-50', 'border-green-300');
                
                genderDiv.classList.remove('hidden');
                genderDiv.classList.add('flex');
                
                checkBtn.innerText = "Ø­ÙØ¸ ÙˆØ¯Ø®ÙˆÙ„";
                checkBtn.classList.replace('bg-[#C5A059]', 'bg-[#25D366]');
                desc.innerHTML = "<span class='text-[#25D366] font-bold'>âœ¨ Ø¬ÙˆØ§Ù„ Ø¬Ø¯ÙŠØ¯! Ø£ÙƒÙ…Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¯Ø®ÙˆÙ„</span>";
            } else {
                isPhoneMode = false;
                passInput.type = "password";
                passInput.placeholder = "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±";
                passInput.classList.remove('bg-green-50', 'border-green-300');
                
                genderDiv.classList.add('hidden');
                genderDiv.classList.remove('flex');
                
                checkBtn.innerText = "ØªØ­Ù‚Ù‚ Ø§Ù„Ø¢Ù†";
                checkBtn.classList.replace('bg-[#25D366]', 'bg-[#C5A059]');
                desc.innerText = "Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ Ù„Ù„Ø¯Ø®ÙˆÙ„";
            }
        }

        // --- Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ± ---
        async function checkStudent() {
            const input1 = document.getElementById('idInput').value.trim();
            const input2 = document.getElementById('passwordInput').value.trim();
            const msgArea = document.getElementById('loginMsg');

            if (!input1 || !input2) {
                msgArea.innerHTML = "<div class='error-msg'>ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„</div>";
                return;
            }

            try {
                if (!studentsCache) {
                    const response = await fetch('students.json');
                    const encryptedText = await response.text();
                    
                    // Ù…Ø­Ø§ÙˆÙ„Ø© ÙÙƒ Ø§Ù„ØªØ´ÙÙŠØ±
                    try {
                        const bytes = CryptoJS.AES.decrypt(encryptedText, SECRET_KEY);
                        const originalText = bytes.toString(CryptoJS.enc.Utf8);
                        studentsCache = JSON.parse(originalText);
                    } catch(e) {
                        // Fallback ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù† Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø´ÙØ± (Ù„Ù„ØªØ¬Ø±Ø¨Ø© ÙÙ‚Ø·)
                        studentsCache = JSON.parse(encryptedText);
                    }
                }

                if (isPhoneMode) {
                    // ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ù„Ø¬ÙˆØ§Ù„
                    if (!/^\d{9}$/.test(input2)) {
                        msgArea.innerHTML = "<div class='error-msg'>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 9 Ø£Ø±Ù‚Ø§Ù…</div>";
                        return;
                    }

                    const genderRadios = document.getElementsByName('gender');
                    let selectedGender = null;
                    for (let r of genderRadios) { if (r.checked) selectedGender = r.value; }
                    
                    if (!selectedGender) {
                        msgArea.innerHTML = "<div class='error-msg'>ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¬Ù†Ø³</div>";
                        return;
                    }

                    const newUser = { firstName: "Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯", gender: selectedGender, id: input2, phone: input1 };
                    localStorage.setItem('basayer_user', JSON.stringify(newUser));
                    
                    isLoggedIn = true;
                    updateUIOnLogin(newUser.firstName, newUser.gender);
                    msgArea.innerHTML = `<div class='success-msg'>ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!</div>`;
                    setTimeout(() => toggleModal('loginModal', 'close'), 1500);

                } else {
                    // Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„Ù‡ÙˆÙŠØ©
                    if (input2 !== "12345678") {
                        msgArea.innerHTML = "<div class='error-msg'>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©</div>";
                        return;
                    }

                    const student = studentsCache.find(s => String(s["Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©"]) === input1);

                    if (student) {
                        const firstName = student["Ø§Ù„Ø§Ø³Ù… Ø±Ø¨Ø§Ø¹ÙŠ "].split(' ')[0];
                        const gender = student["Ø§Ù„Ø¬Ù†Ø³"];
                        
                        localStorage.setItem('basayer_user', JSON.stringify({ firstName, gender }));
                        isLoggedIn = true;
                        updateUIOnLogin(firstName, gender);
                        
                        msgArea.innerHTML = `<div class='success-msg'>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ${firstName}</div>`;
                        setTimeout(() => toggleModal('loginModal', 'close'), 1000);
                    } else {
                        msgArea.innerHTML = "<div class='error-msg'>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© ØºÙŠØ± Ù…Ø³Ø¬Ù„</div>";
                    }
                }
            } catch (error) {
                console.error(error);
                msgArea.innerHTML = "<div class='error-msg'>Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø£Ùˆ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>";
            }
        }

        function updateUIOnLogin(name, gender) {
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ±Ø­ÙŠØ¨
            ['heroLoginBtn', 'loginBtnNav'].forEach(id => document.getElementById(id).classList.add('hidden'));
            
            const welcomeMsg = document.getElementById('welcomeMsg');
            welcomeMsg.innerHTML = `${gender === 'Ø£Ù†Ø«Ù‰' ? 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ' : 'Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ'}ØŒ <span class="text-[#C5A059]">${name}</span>`;
            document.getElementById('userWelcome').classList.remove('hidden');

            ['scheduleNavItem', 'scheduleSection'].forEach(id => document.getElementById(id).classList.remove('hidden'));

            // ğŸŸ¢ ØªÙØ¹ÙŠÙ„ ÙƒØ±ÙˆØª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ù…Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø°ÙƒÙŠØ©
            activateCard('card-library', 'lib-status', "ÙØªØ­ Ø§Ù„Ù…ÙƒØªØ¨Ø©", () => window.open('https://drive.google.com/drive/folders/1rhrsuuQ3omkbiQYk-EINJ81zWb05bwnp', '_blank'));
            
            activateCard('card-chat', 'chat-status', "Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©", () => {
                const link = WHATSAPP_LINKS[gender] || WHATSAPP_LINKS['Ø°ÙƒØ±'];
                window.open(link, '_blank');
            });
            
            activateCard('card-certs', 'cert-status', "Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ø§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª", openCertificates);
        }

        function activateCard(cardId, statusId, text, action) {
            const card = document.getElementById(cardId);
            const status = document.getElementById(statusId);
            if (card && status) {
                card.classList.replace('opacity-50', 'opacity-100');
                card.classList.replace('cursor-default', 'cursor-pointer');
                card.classList.remove('cursor-not-allowed', 'pointer-events-none');
                card.classList.add('hover:bg-white/20', 'hover:scale-105');
                status.innerText = text;
                card.onclick = action;
            }
        }

        function initCourses() {
            const s1 = document.getElementById('semester1-content');
            const s2 = document.getElementById('semester2-content');
            if (!s1 || !s2) return;
            s1.innerHTML = ""; s2.innerHTML = "";

            Object.entries(coursesData).forEach(([name, data]) => {
                const card = `
                <div onclick="openCourse('${name}')" class="course-card bg-white p-6 rounded-2xl shadow-sm border border-gray-100 text-right cursor-pointer">
                    <h3 class="font-bold text-[#5D4037] mb-2">${name}</h3>
                    <p class="text-sm text-[#C5A059] mb-4">${data.teacher}</p>
                    <div class="text-[10px] text-gray-400">Ø§Ù†Ù‚Ø± Ù„Ù„ØªÙØ§ØµÙŠÙ„ ...</div>
                </div>`;
                if (data.sem.includes('Ø§Ù„Ø£ÙˆÙ„')) s1.innerHTML += card;
                else s2.innerHTML += card;
            });
            showSemester(1);
        }

        function openCourse(name) {
            if (!isLoggedIn) { alert("ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹"); openLogin(); return; }
            const d = coursesData[name];
            const user = JSON.parse(localStorage.getItem('basayer_user')) || { firstName: "Ø·Ø§Ù„Ø¨" };
            
            document.getElementById('modalTitle').innerText = name;
            document.getElementById('modalDesc').innerText = d.desc;
            document.getElementById('modalSem').innerText = d.sem;
            
            const teacherArea = document.getElementById('modalTeacher');
            if (d.phone) {
                const msg = encodeURIComponent(`Ø§Ù„Ø³Ù„Ø§Ù… Ø¹Ù„ÙŠÙƒÙ…ØŒ Ø£Ù†Ø§ ${user.firstName}ØŒ Ù„Ø¯ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± Ø¨Ø®ØµÙˆØµ ${name}`);
                teacherArea.innerHTML = `Ø¨Ø¥Ø´Ø±Ø§Ù: <a href="https://wa.me/${d.phone}?text=${msg}" target="_blank" class="text-[#25D366] font-bold underline">${d.teacher} ğŸ’¬</a>`;
            } else {
                teacherArea.innerText = `Ø¨Ø¥Ø´Ø±Ø§Ù: ${d.teacher}`;
            }
            toggleModal('courseModal', 'open');
        }

        function showSemester(n) {
            document.getElementById('semester1-content').classList.toggle('hidden', n !== 1);
            document.getElementById('semester2-content').classList.toggle('hidden', n !== 2);
            const btn1 = document.getElementById('btn-sem1');
            const btn2 = document.getElementById('btn-sem2');
            const active = "bg-[#5D4037] text-white shadow-lg";
            const inactive = "text-[#5D4037] hover:bg-gray-50";
            btn1.className = `px-6 md:px-10 py-3 rounded-full font-bold transition-all text-sm md:text-base ${n === 1 ? active : inactive}`;
            btn2.className = `px-6 md:px-10 py-3 rounded-full font-bold transition-all text-sm md:text-base ${n === 2 ? active : inactive}`;
        }

        function openCertificates() {
            const slider = document.getElementById('certSlider');
            slider.innerHTML = certificateImages.map(img => 
                `<div class="min-w-full flex justify-center p-2"><img src="${img}" onclick="document.getElementById('fullCertImg').src='${img}';toggleModal('fullCertView','open')" class="rounded-xl shadow-2xl border-4 border-[#C5A059]/30 cursor-zoom-in max-h-[70vh] object-contain"></div>`
            ).join('');
            currentIdx = 0; updateSlider(); toggleModal('certModal', 'open');
        }
        function moveCert(dir) { currentIdx = (currentIdx + dir + certificateImages.length) % certificateImages.length; updateSlider(); }
        function updateSlider() { document.getElementById('certSlider').style.transform = `translateX(${currentIdx * 100}%)`; }

        function toggleModal(id, action) { 
            const m = document.getElementById(id); 
            if(!m) return;
            if (action === 'open') { m.classList.remove('hidden'); m.classList.add('flex'); }
            else { m.classList.remove('flex'); m.classList.add('hidden'); }
        }
        function openLogin() { toggleModal('loginModal', 'open'); }
        function closeLogin() { toggleModal('loginModal', 'close'); }
        function closeCourseModal() { toggleModal('courseModal', 'close'); }
        function closeModal(id) { toggleModal(id, 'close'); }
        function openScheduleModal() { document.body.insertAdjacentHTML('beforeend', `<div id="imgModal" onclick="this.remove()" class="fixed inset-0 bg-black/90 z-[999] flex items-center justify-center p-4 cursor-pointer"><img src="scedule.jpg" class="max-w-full max-h-full rounded-lg shadow-2xl"><div class="absolute top-5 right-5 text-white text-2xl">Ã—</div></div>`); }
        function logout() { localStorage.removeItem('basayer_user'); location.reload(); }
        function toggleMobileMenu() { const m = document.getElementById('navMenu'); m.classList.toggle('hidden'); m.classList.toggle('flex'); }
        function toggleDarkMode() { document.body.classList.toggle('dark-mode'); localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light'); }
    </script>
</body>
</html>